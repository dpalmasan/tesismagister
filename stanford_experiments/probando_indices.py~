import codecs
from textstat.textstat import textstat

# Lee un ensayo y retorna el texto
def read_file(filename):
    with codecs.open(filename, "r", "utf-8") as essay:
        s = essay.read()
    return s

s = read_file("essays/1.txt")



head = "flesch_reading_ease,smog_index,flesch_kincaid_grade,coleman_liau_index,auto_read_ind,dale_chall_sc,diff_words,linsear_wr,gun_fog"
with codecs.open("features2.csv", "w", "utf-8") as output:
    output.write(head + "\n")

for id in range(1, 1787):
	s = read_file("essays/" + str(id) + ".txt")
	
	i1 = textstat.flesch_reading_ease(s)
	i2 = textstat.smog_index(s)
	i3 = textstat.flesch_kincaid_grade(s)
	i4 = textstat.coleman_liau_index(s)
	i5 = textstat.automated_readability_index(s)
	i6 = textstat.dale_chall_readability_score(s)
	i7 = textstat.difficult_words(s)
	i8 = textstat.linsear_write_formula(s)
	i9 = textstat.gunning_fog(s)
	data = ",".join([str(i1),str(i2),str(i3),str(i4),str(i5),str(i6),str(i7),str(i8),str(i9)])
	with codecs.open("features2.csv", "a", "utf-8") as output:
        output.write(data + "\n")
